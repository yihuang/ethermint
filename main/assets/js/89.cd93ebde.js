(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{599:function(t,a,e){"use strict";e.r(a);var s=e(0),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"concepts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#concepts"}},[t._v("#")]),t._v(" Concepts")]),t._v(" "),e("h2",{attrs:{id:"evm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#evm"}},[t._v("#")]),t._v(" EVM")]),t._v(" "),e("p",[t._v("The Ethereum Virtual Machine "),e("a",{attrs:{href:"https://ethereum.org/en/developers/docs/evm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVM"),e("OutboundLink")],1),t._v("  is a state machine\nthat provides the necessary tools to run or create a contract on a given state.")]),t._v(" "),e("h2",{attrs:{id:"state-db"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state-db"}},[t._v("#")]),t._v(" State DB")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("StateDB")]),t._v(" interface from geth represents an EVM database for full state querying of both\ncontracts and accounts. The concrete type that fulfills this interface on Ethermint is the\n"),e("code",[t._v("CommitStateDB")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"genesis-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#genesis-state"}},[t._v("#")]),t._v(" Genesis State")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("x/evm")]),t._v(" module "),e("code",[t._v("GenesisState")]),t._v(" defines the state necessary for initializing the chain from a previous exported height.")]),t._v(" "),e("p",[e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CS8vIEdlbmVzaXNTdGF0ZSBkZWZpbmVzIHRoZSBldm0gbW9kdWxlIGdlbmVzaXMgc3RhdGUKCUdlbmVzaXNTdGF0ZSBzdHJ1Y3QgewoJCUFjY291bnRzICAgIFtdR2VuZXNpc0FjY291bnQgIGBqc29uOiZxdW90O2FjY291bnRzJnF1b3Q7YAoJCVR4c0xvZ3MgICAgIFtdVHJhbnNhY3Rpb25Mb2dzIGBqc29uOiZxdW90O3R4c19sb2dzJnF1b3Q7YAoJCUNoYWluQ29uZmlnIENoYWluQ29uZmlnICAgICAgIGBqc29uOiZxdW90O2NoYWluX2NvbmZpZyZxdW90O2AKCQlQYXJhbXMgICAgICBQYXJhbXMgICAgICAgICAgICBganNvbjomcXVvdDtwYXJhbXMmcXVvdDtgCgl9"}})],1),t._v(" "),e("h3",{attrs:{id:"genesis-accounts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#genesis-accounts"}},[t._v("#")]),t._v(" Genesis Accounts")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("GenesisAccount")]),t._v(" type corresponds to an adaptation of the Ethereum "),e("code",[t._v("GenesisAccount")]),t._v(" type. Its\nmain difference is that the one on Ethermint uses a custom "),e("code",[t._v("Storage")]),t._v(" type that uses a slice instead\nof maps for the evm "),e("code",[t._v("State")]),t._v(" (due to non-determinism), and that it doesn't contain the private key\nfield.")]),t._v(" "),e("p",[t._v("It is also important to note that since the "),e("code",[t._v("auth")]),t._v(" and "),e("code",[t._v("bank")]),t._v(" SDK modules manage the accounts and\nbalance state,  the "),e("code",[t._v("Address")]),t._v(" must correspond to an "),e("code",[t._v("EthAccount")]),t._v(" that is stored in the "),e("code",[t._v("auth")]),t._v("'s\nmodule "),e("code",[t._v("AccountKeeper")]),t._v(" and the balance must match the balance of the "),e("code",[t._v("EvmDenom")]),t._v(" token denomination\ndefined on the "),e("code",[t._v("GenesisState")]),t._v("'s "),e("code",[t._v("Param")]),t._v(". The values for the address and the balance amount maintain\nthe same format as the ones from the SDK to make manual inspections easier on the genesis.json.")]),t._v(" "),e("p",[e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"CS8vIEdlbmVzaXNBY2NvdW50IGRlZmluZXMgYW4gYWNjb3VudCB0byBiZSBpbml0aWFsaXplZCBpbiB0aGUgZ2VuZXNpcyBzdGF0ZS4KCS8vIEl0cyBtYWluIGRpZmZlcmVuY2UgYmV0d2VlbiB3aXRoIEdldGgncyBHZW5lc2lzQWNjb3VudCBpcyB0aGF0IGl0IHVzZXMgYSBjdXN0b20KCS8vIHN0b3JhZ2UgdHlwZSBhbmQgdGhhdCBpdCBkb2Vzbid0IGNvbnRhaW4gdGhlIHByaXZhdGUga2V5IGZpZWxkLgoJR2VuZXNpc0FjY291bnQgc3RydWN0IHsKCQlBZGRyZXNzIGV0aGNtbi5BZGRyZXNzIGBqc29uOiZxdW90O2FkZHJlc3MmcXVvdDtgCgkJQmFsYW5jZSAqYmlnLkludCAgICAgICBganNvbjomcXVvdDtiYWxhbmNlJnF1b3Q7YAoJCUNvZGUgICAgaGV4dXRpbC5CeXRlcyAgYGpzb246JnF1b3Q7Y29kZSxvbWl0ZW1wdHkmcXVvdDtgCgkJU3RvcmFnZSBTdG9yYWdlICAgICAgICBganNvbjomcXVvdDtzdG9yYWdlLG9taXRlbXB0eSZxdW90O2AKCX0="}})],1),t._v(" "),e("h3",{attrs:{id:"transaction-logs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transaction-logs"}},[t._v("#")]),t._v(" Transaction Logs")]),t._v(" "),e("p",[t._v("On every Ethermint transaction, its result contains the Ethereum "),e("code",[t._v("Log")]),t._v("s from the state machine\nexecution that are used by the JSON-RPC Web3 server for for filter querying. Since Cosmos upgrades\ndon't persist the transactions on the blockchain state, we need to persist the logs the EVM module\nstate to prevent the queries from failing.")]),t._v(" "),e("p",[e("code",[t._v("TxsLogs")]),t._v(" is the field that contains all the transaction logs that need to be persisted after an\nupgrade. It uses an array instead of a map to ensure determinism on the iteration.")]),t._v(" "),e("p",[e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gVHJhbnNhY3Rpb25Mb2dzIGRlZmluZSB0aGUgbG9ncyBnZW5lcmF0ZWQgZnJvbSBhIHRyYW5zYWN0aW9uIGV4ZWN1dGlvbgovLyB3aXRoIGEgZ2l2ZW4gaGFzaC4gSXQgaXQgdXNlZCBmb3IgaW1wb3J0L2V4cG9ydCBkYXRhIGFzIHRyYW5zYWN0aW9ucyBhcmUgbm90IHBlcnNpc3RlZAovLyBvbiBibG9ja2NoYWluIHN0YXRlIGFmdGVyIGFuIHVwZ3JhZGUuCnR5cGUgVHJhbnNhY3Rpb25Mb2dzIHN0cnVjdCB7CglIYXNoIGV0aGNtbi5IYXNoICAgICBganNvbjomcXVvdDtoYXNoJnF1b3Q7YAoJTG9ncyBbXSpldGh0eXBlcy5Mb2cgYGpzb246JnF1b3Q7bG9ncyZxdW90O2AKfQ=="}})],1),t._v(" "),e("h3",{attrs:{id:"chain-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chain-config"}},[t._v("#")]),t._v(" Chain Config")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("ChainConfig")]),t._v(" is a custom type that contains the same fields as the go-ethereum "),e("code",[t._v("ChainConfig")]),t._v("\nparameters, but using "),e("code",[t._v("sdk.Int")]),t._v(" types instead of "),e("code",[t._v("*big.Int")]),t._v(". It also defines additional YAML tags\nfor pretty printing.")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("ChainConfig")]),t._v(" type is not a configurable SDK "),e("code",[t._v("Param")]),t._v(" since the SDK does not allow for validation\nagainst a previous stored parameter values or "),e("code",[t._v("Context")]),t._v(" fields. Since most of this type's fields\nrely on the block height value, this limitation prevents the validation of of potential new\nparameter values against the current block height (eg: to prevent updating the config block values\nto a past block).")]),t._v(" "),e("p",[t._v("If you want to update the config values, use an software upgrade procedure.")]),t._v(" "),e("p",[e("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gQ2hhaW5Db25maWcgZGVmaW5lcyB0aGUgRXRoZXJldW0gQ2hhaW5Db25maWcgcGFyYW1ldGVycyB1c2luZyBzZGsuSW50IHZhbHVlcyBpbnN0ZWFkIG9mIGJpZy5JbnQuCi8vCi8vIE5PVEUgMTogU2luY2UgZW1wdHkvdW5pbml0aWFsaXplZCBJbnRzIChpLmUgd2l0aCBhIG5pbCBiaWcuSW50IHZhbHVlKSBhcmUgcGFyc2VkIHRvIHplcm8sIHdlIG5lZWQgdG8gbWFudWFsbHkKLy8gc3BlY2lmeSB0aGF0IG5lZ2F0aXZlIEludCB2YWx1ZXMgd2lsbCBiZSBjb25zaWRlcmVkIGFzIG5pbC4gU2VlIGdldEJsb2NrVmFsdWUgZm9yIHJlZmVyZW5jZS4KLy8KLy8gTk9URSAyOiBUaGlzIHR5cGUgaXMgbm90IGEgY29uZmlndXJhYmxlIFBhcmFtIHNpbmNlIHRoZSBTREsgZG9lcyBub3QgYWxsb3cgZm9yIHZhbGlkYXRpb24gYWdhaW5zdAovLyBhIHByZXZpb3VzIHN0b3JlZCBwYXJhbWV0ZXIgdmFsdWVzIG9yIHRoZSBjdXJyZW50IGJsb2NrIGhlaWdodCAocmV0cmlldmVkIGZyb20gY29udGV4dCkuIElmIHlvdQovLyB3YW50IHRvIHVwZGF0ZSB0aGUgY29uZmlnIHZhbHVlcywgdXNlIGFuIHNvZnR3YXJlIHVwZ3JhZGUgcHJvY2VkdXJlLgp0eXBlIENoYWluQ29uZmlnIHN0cnVjdCB7CglIb21lc3RlYWRCbG9jayBzZGsuSW50IGBqc29uOiZxdW90O2hvbWVzdGVhZF9ibG9jayZxdW90OyB5YW1sOiZxdW90O2hvbWVzdGVhZF9ibG9jayZxdW90O2AgLy8gSG9tZXN0ZWFkIHN3aXRjaCBibG9jayAoJmx0OyAwIG5vIGZvcmssIDAgPSBhbHJlYWR5IGhvbWVzdGVhZCkKCglEQU9Gb3JrQmxvY2sgICBzZGsuSW50IGBqc29uOiZxdW90O2Rhb19mb3JrX2Jsb2NrJnF1b3Q7IHlhbWw6JnF1b3Q7ZGFvX2ZvcmtfYmxvY2smcXVvdDtgICAgICAvLyBUaGVEQU8gaGFyZC1mb3JrIHN3aXRjaCBibG9jayAoJmx0OyAwIG5vIGZvcmspCglEQU9Gb3JrU3VwcG9ydCBib29sICAgIGBqc29uOiZxdW90O2Rhb19mb3JrX3N1cHBvcnQmcXVvdDsgeWFtbDomcXVvdDtkYW9fZm9ya19zdXBwb3J0JnF1b3Q7YCAvLyBXaGV0aGVyIHRoZSBub2RlcyBzdXBwb3J0cyBvciBvcHBvc2VzIHRoZSBEQU8gaGFyZC1mb3JrCgoJLy8gRUlQMTUwIGltcGxlbWVudHMgdGhlIEdhcyBwcmljZSBjaGFuZ2VzIChodHRwczovL2dpdGh1Yi5jb20vZXRoZXJldW0vRUlQcy9pc3N1ZXMvMTUwKQoJRUlQMTUwQmxvY2sgc2RrLkludCBganNvbjomcXVvdDtlaXAxNTBfYmxvY2smcXVvdDsgeWFtbDomcXVvdDtlaXAxNTBfYmxvY2smcXVvdDtgIC8vIEVJUDE1MCBIRiBibG9jayAoJmx0OyAwIG5vIGZvcmspCglFSVAxNTBIYXNoICBzdHJpbmcgIGBqc29uOiZxdW90O2VpcDE1MF9oYXNoJnF1b3Q7IHlhbWw6JnF1b3Q7ZWlwMTUwX2hhc2gmcXVvdDtgICAgLy8gRUlQMTUwIEhGIGhhc2ggKG5lZWRlZCBmb3IgaGVhZGVyIG9ubHkgY2xpZW50cyBhcyBvbmx5IGdhcyBwcmljaW5nIGNoYW5nZWQpCgoJRUlQMTU1QmxvY2sgc2RrLkludCBganNvbjomcXVvdDtlaXAxNTVfYmxvY2smcXVvdDsgeWFtbDomcXVvdDtlaXAxNTVfYmxvY2smcXVvdDtgIC8vIEVJUDE1NSBIRiBibG9jawoJRUlQMTU4QmxvY2sgc2RrLkludCBganNvbjomcXVvdDtlaXAxNThfYmxvY2smcXVvdDsgeWFtbDomcXVvdDtlaXAxNThfYmxvY2smcXVvdDtgIC8vIEVJUDE1OCBIRiBibG9jawoKCUJ5emFudGl1bUJsb2NrICAgICAgc2RrLkludCBganNvbjomcXVvdDtieXphbnRpdW1fYmxvY2smcXVvdDsgeWFtbDomcXVvdDtieXphbnRpdW1fYmxvY2smcXVvdDtgICAgICAgICAgICAvLyBCeXphbnRpdW0gc3dpdGNoIGJsb2NrICgmbHQ7IDAgbm8gZm9yaywgMCA9IGFscmVhZHkgb24gYnl6YW50aXVtKQoJQ29uc3RhbnRpbm9wbGVCbG9jayBzZGsuSW50IGBqc29uOiZxdW90O2NvbnN0YW50aW5vcGxlX2Jsb2NrJnF1b3Q7IHlhbWw6JnF1b3Q7Y29uc3RhbnRpbm9wbGVfYmxvY2smcXVvdDtgIC8vIENvbnN0YW50aW5vcGxlIHN3aXRjaCBibG9jayAoJmx0OyAwIG5vIGZvcmssIDAgPSBhbHJlYWR5IGFjdGl2YXRlZCkKCVBldGVyc2J1cmdCbG9jayAgICAgc2RrLkludCBganNvbjomcXVvdDtwZXRlcnNidXJnX2Jsb2NrJnF1b3Q7IHlhbWw6JnF1b3Q7cGV0ZXJzYnVyZ19ibG9jayZxdW90O2AgICAgICAgICAvLyBQZXRlcnNidXJnIHN3aXRjaCBibG9jayAoJmx0OyAwIHNhbWUgYXMgQ29uc3RhbnRpbm9wbGUpCglJc3RhbmJ1bEJsb2NrICAgICAgIHNkay5JbnQgYGpzb246JnF1b3Q7aXN0YW5idWxfYmxvY2smcXVvdDsgeWFtbDomcXVvdDtpc3RhbmJ1bF9ibG9jayZxdW90O2AgICAgICAgICAgICAgLy8gSXN0YW5idWwgc3dpdGNoIGJsb2NrICgmbHQ7IDAgbm8gZm9yaywgMCA9IGFscmVhZHkgb24gaXN0YW5idWwpCglNdWlyR2xhY2llckJsb2NrICAgIHNkay5JbnQgYGpzb246JnF1b3Q7bXVpcl9nbGFjaWVyX2Jsb2NrJnF1b3Q7IHlhbWw6JnF1b3Q7bXVpcl9nbGFjaWVyX2Jsb2NrJnF1b3Q7YCAgICAgLy8gRWlwLTIzODQgKGJvbWIgZGVsYXkpIHN3aXRjaCBibG9jayAoJmx0OyAwIG5vIGZvcmssIDAgPSBhbHJlYWR5IGFjdGl2YXRlZCkKCglZb2xvVjJCbG9jayBzZGsuSW50IGBqc29uOiZxdW90O3lvbG9WMl9ibG9jayZxdW90OyB5YW1sOiZxdW90O3lvbG9WMl9ibG9jayZxdW90O2AgLy8gWU9MTyB2MTogaHR0cHM6Ly9naXRodWIuY29tL2V0aGVyZXVtL0VJUHMvcHVsbC8yNjU3IChFcGhlbWVyYWwgdGVzdG5ldCkKCUVXQVNNQmxvY2sgIHNkay5JbnQgYGpzb246JnF1b3Q7ZXdhc21fYmxvY2smcXVvdDsgeWFtbDomcXVvdDtld2FzbV9ibG9jayZxdW90O2AgICAvLyBFV0FTTSBzd2l0Y2ggYmxvY2sgKCZsdDsgMCBubyBmb3JrLCAwID0gYWxyZWFkeSBhY3RpdmF0ZWQpCn0="}})],1),t._v(" "),e("h3",{attrs:{id:"params"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#params"}},[t._v("#")]),t._v(" Params")]),t._v(" "),e("p",[t._v("See the "),e("RouterLink",{attrs:{to:"/modules/evm/07_params.html"}},[t._v("params")]),t._v(" document for further information about parameters.")],1)])}),[],!1,null,null,null);a.default=n.exports}}]);