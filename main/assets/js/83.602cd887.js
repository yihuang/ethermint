(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{640:function(t,e,a){"use strict";a.r(e);var o=a(0),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"truffle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#truffle"}},[t._v("#")]),t._v(" Truffle")]),t._v(" "),a("p",{attrs:{synopsis:""}},[t._v("Set up a Truffle Ethermint local development environment.")]),t._v(" "),a("h2",{attrs:{id:"pre-requisite-readings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[t._v("#")]),t._v(" Pre-requisite Readings")]),t._v(" "),a("ul",[a("li",{attrs:{prereq:""}},[a("RouterLink",{attrs:{to:"/quickstart/installation.html"}},[t._v("Installation")])],1),t._v(" "),a("li",{attrs:{prereq:""}},[a("RouterLink",{attrs:{to:"/quickstart/run_node.html"}},[t._v("Run a node")])],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.trufflesuite.com/truffle",target:"_blank",rel:"noopener noreferrer"}},[t._v("Truffle"),a("OutboundLink")],1),t._v(" is a development framework for deploying and managing "),a("a",{attrs:{href:"https://github.com/ethereum/solidity",target:"_blank",rel:"noopener noreferrer"}},[t._v("Solidity"),a("OutboundLink")],1),t._v(" smart contracts. In this guide, we will learn how to deploy a contract to a running Ethermint network.")]),t._v(" "),a("h2",{attrs:{id:"install-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-dependencies"}},[t._v("#")]),t._v(" Install dependencies")]),t._v(" "),a("p",[t._v("First, install the latest Truffle version on your machine globally.")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"eWFybiBpbnN0YWxsIHRydWZmbGUgLWcK"}}),t._v(" "),a("p",[t._v("You will also need to install Ethermint. Check this "),a("RouterLink",{attrs:{to:"/quickstart/installation.html"}},[t._v("document")]),t._v(" for the full instructions.")],1),t._v(" "),a("h2",{attrs:{id:"create-truffle-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-truffle-project"}},[t._v("#")]),t._v(" Create Truffle Project")]),t._v(" "),a("p",[t._v("In this step we will create a simple counter contract. Feel free to skip this step if you already have your own compiled contract.")]),t._v(" "),a("p",[t._v("Create a new directory to host the contracts and initialize it")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"bWtkaXIgZXRoZXJtaW50LXRydWZmbGUKY2QgZXRoZXJtaW50LXRydWZmbGUK"}}),t._v(" "),a("p",[t._v("Initialize the Truffle suite with:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dHJ1ZmZsZSBpbml0Cg=="}}),t._v(" "),a("p",[t._v("Create "),a("code",[t._v("contracts/Counter.sol")]),t._v(" containing the following contract:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"cHJhZ21hIHNvbGlkaXR5IF4wLjUuMTE7Cgpjb250cmFjdCBDb3VudGVyIHsKICB1aW50MjU2IGNvdW50ZXIgPSAwOwoKICBmdW5jdGlvbiBhZGQoKSBwdWJsaWMgewogICAgY291bnRlcisrOwogIH0KCiAgZnVuY3Rpb24gc3VidHJhY3QoKSBwdWJsaWMgewogICAgY291bnRlci0tOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q291bnRlcigpIHB1YmxpYyB2aWV3IHJldHVybnMgKHVpbnQyNTYpIHsKICAgIHJldHVybiBjb3VudGVyOwogIH0KfQo="}}),t._v(" "),a("p",[t._v("Compile the contract using the "),a("code",[t._v("compile")]),t._v(" command:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dHJ1ZmZsZSBjb21waWxlCg=="}}),t._v(" "),a("p",[t._v("Create "),a("code",[t._v("test/counter_test.js")]),t._v(" containing the following tests in Javascript using "),a("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Y29uc3QgQ291bnRlciA9IGFydGlmYWN0cy5yZXF1aXJlKCZxdW90O0NvdW50ZXImcXVvdDspCgpjb250cmFjdCgnQ291bnRlcicsIGFjY291bnRzID0mZ3Q7IHsKICBjb25zdCBmcm9tID0gYWNjb3VudHNbMF0KICBsZXQgY291bnRlcgoKICBiZWZvcmUoYXN5bmMoKSA9Jmd0OyB7CiAgICBjb3VudGVyID0gYXdhaXQgQ291bnRlci5uZXcoKQogIH0pCgogIGl0KCdzaG91bGQgYWRkJywgYXN5bmMoKSA9Jmd0OyB7CiAgICBhd2FpdCBjb3VudGVyLmFkZCgpCiAgICBsZXQgY291bnQgPSBhd2FpdCBjb3VudGVyLmdldENvdW50ZXIoKQogICAgYXNzZXJ0KGNvdW50ID09IDEsIGBjb3VudCB3YXMgJHtjb3VudH1gKQogIH0pCn0pCg=="}}),t._v(" "),a("h2",{attrs:{id:"truffle-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#truffle-configuration"}},[t._v("#")]),t._v(" Truffle configuration")]),t._v(" "),a("p",[t._v("Open "),a("code",[t._v("truffle-config.js")]),t._v(" and uncomment the "),a("code",[t._v("development")]),t._v(" section in "),a("code",[t._v("networks")]),t._v(":")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"ICAgIGRldmVsb3BtZW50OiB7CiAgICAgaG9zdDogJnF1b3Q7MTI3LjAuMC4xJnF1b3Q7LCAgICAgLy8gTG9jYWxob3N0IChkZWZhdWx0OiBub25lKQogICAgIHBvcnQ6IDg1NDUsICAgICAgICAgICAgLy8gU3RhbmRhcmQgRXRoZXJldW0gcG9ydCAoZGVmYXVsdDogbm9uZSkKICAgICBuZXR3b3JrX2lkOiAmcXVvdDsqJnF1b3Q7LCAgICAgICAvLyBBbnkgbmV0d29yayAoZGVmYXVsdDogbm9uZSkKICAgIH0sCg=="}}),t._v(" "),a("p",[t._v("This will allow your contract to connect to your Ethermint local node.")]),t._v(" "),a("h2",{attrs:{id:"start-node-and-rest-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-node-and-rest-server"}},[t._v("#")]),t._v(" Start Node and REST server")]),t._v(" "),a("p",[t._v("Start your local node using the following command on the Terminal")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"IyBvbiB0aGUgfi9ldGhlcm1pbnQvIGRpcmVjdG9yeQppbml0LnNoCg=="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("For further information on how to run a node, please refer to "),a("RouterLink",{attrs:{to:"/quickstart/run_node.html"}},[t._v("this")]),t._v(" quickstart document.")],1)]),t._v(" "),a("p",[t._v("In another Terminal wintdow/tab, start the "),a("RouterLink",{attrs:{to:"/quickstart/clients.html#rest-and-tendermint-rpc.html"}},[t._v("REST and JSON-RPC server")]),t._v(":")],1),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXRoZXJtaW50Y2xpIHJlc3Qtc2VydmVyIC0tbGFkZHIgJnF1b3Q7dGNwOi8vbG9jYWxob3N0Ojg1NDUmcXVvdDsgLS11bmxvY2sta2V5IG15a2V5LS1jaGFpbi1pZCA4IC0tdHJhY2UK"}}),t._v(" "),a("h2",{attrs:{id:"deploy-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-contract"}},[t._v("#")]),t._v(" Deploy contract")]),t._v(" "),a("p",[t._v("Back in the Truffle terminal, migrate the contract using")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dHJ1ZmZsZSBtaWdyYXRlIC0tbmV0d29yayBkZXZlbG9wbWVudAo="}}),t._v(" "),a("p",[t._v("You should see incoming deployment logs in the Ethermint daemon Terminal tab for each transaction (one to deploy "),a("code",[t._v("Migrations.sol")]),t._v(" and the oether to deploy "),a("code",[t._v("Counter.sol")]),t._v(").")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"SVsyMDIwLTA3LTE1fDE3OjM1OjU5LjkzNF0gQWRkZWQgZ29vZCB0cmFuc2FjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlPW1lbXBvb2wgdHg9MjIyNDVCOTM1Njg5OTE4RDMzMkY1OEU4MjY5MEYwMjA3M0YwNDUzRDU0RDU5NDRCNkQ2NEFBRjFGMjE5NzRFMiByZXM9JnF1b3Q7JmFtcDt7Q2hlY2tUeDpsb2c6XCZxdW90O1tdXCZxdW90OyBnYXNfd2FudGVkOjY3MjE5NzUgfSZxdW90OyBoZWlnaHQ9MyB0b3RhbD0xCklbMjAyMC0wNy0xNXwxNzozNjowMi4wNjVdIEV4ZWN1dGVkIGJsb2NrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZT1zdGF0ZSBoZWlnaHQ9NCB2YWxpZFR4cz0xIGludmFsaWRUeHM9MApJWzIwMjAtMDctMTV8MTc6MzY6MDIuMDY4XSBDb21taXR0ZWQgc3RhdGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGU9c3RhdGUgaGVpZ2h0PTQgdHhzPTEgYXBwSGFzaD03NkJBODUzNjVGMTBBNTlGRTI0QURDQTg3NTQ0MTkxQzJENzJCOUZCNTYzMDQ2NkM1QjcxRTg3OEY5QzBBMTExCklbMjAyMC0wNy0xNXwxNzozNjowMi45ODFdIEFkZGVkIGdvb2QgdHJhbnNhY3Rpb24gICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZT1tZW1wb29sIHR4PTg0NTE2QjQ1ODhDQkIyMUU2RDU2MkE2QTI5NUYxRjg4NzYwNzZBMENGRjJFRjFCMEVDNjcwQUQ4RDhCQjU0MjUgcmVzPSZxdW90OyZhbXA7e0NoZWNrVHg6bG9nOlwmcXVvdDtbXVwmcXVvdDsgZ2FzX3dhbnRlZDo2NzIxOTc1IH0mcXVvdDsgaGVpZ2h0PTQgdG90YWw9MQo="}}),t._v(" "),a("h2",{attrs:{id:"run-truffle-tests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-truffle-tests"}},[t._v("#")]),t._v(" Run Truffle tests")]),t._v(" "),a("p",[t._v("Now, you can run the Truffle tests using the Ethermint node using the "),a("code",[t._v("test")]),t._v(" command:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"dHJ1ZmZsZSB0ZXN0IC0tbmV0d29yayBkZXZlbG9wbWVudAoKVXNpbmcgbmV0d29yayAnZGV2ZWxvcG1lbnQnLgoKCkNvbXBpbGluZyB5b3VyIGNvbnRyYWN0cy4uLgo9PT09PT09PT09PT09PT09PT09PT09PT09PT0KJmd0OyBFdmVyeXRoaW5nIGlzIHVwIHRvIGRhdGUsIHRoZXJlIGlzIG5vdGhpbmcgdG8gY29tcGlsZS4KCgoKICBDb250cmFjdDogQ291bnRlcgogICAg4pyTIHNob3VsZCBhZGQgKDUwMzZtcykKCgogIDEgcGFzc2luZyAoMTBzKQo="}}),t._v(" "),a("h2",{attrs:{hide:"",id:"next"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[t._v("#")]),t._v(" Next")]),t._v(" "),a("p",{attrs:{hide:""}},[t._v("Learn how to connect Ethermint to "),a("RouterLink",{attrs:{to:"/guides/metamask.html"}},[t._v("Metamask")])],1)],1)}),[],!1,null,null,null);e.default=s.exports}}]);