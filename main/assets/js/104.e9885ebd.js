(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{574:function(t,e,a){"use strict";a.r(e);var o=a(0),i=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"run-a-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-a-validator"}},[t._v("#")]),t._v(" Run a Validator")]),t._v(" "),a("p",{attrs:{synopsis:""}},[t._v("Configure a validator node to propose blocks and earn staking rewards")]),t._v(" "),a("h2",{attrs:{id:"pre-requisite-readings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[t._v("#")]),t._v(" Pre-requisite Readings")]),t._v(" "),a("ul",[a("li",{attrs:{prereq:""}},[a("RouterLink",{attrs:{to:"/quickstart/installation.html"}},[t._v("Installation")])],1),t._v(" "),a("li",{attrs:{prereq:""}},[a("RouterLink",{attrs:{to:"/quickstart/run_node.html"}},[t._v("Run a Full Node")])],1)]),t._v(" "),a("h2",{attrs:{id:"what-is-a-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-a-validator"}},[t._v("#")]),t._v(" What is a Validator?")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://hub.cosmos.network/master/validators/overview.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Validators"),a("OutboundLink")],1),t._v(" are responsible for committing new blocks to the blockchain through voting. A validator's stake is slashed if they become unavailable or sign blocks at the same height. Please read about "),a("a",{attrs:{href:"https://hub.cosmos.network/master/validators/validator-faq.html#how-can-validators-protect-themselves-from-denial-of-service-attacks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sentry Node Architecture"),a("OutboundLink")],1),t._v(" to protect your node from DDOS attacks and to ensure high-availability.")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("Warning")]),t._v(" "),a("p",[t._v("If you want to become a validator for "),a("code",[t._v("mainnet")]),t._v(", you should "),a("a",{attrs:{href:"https://hub.cosmos.network/master/validators/security.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("research security"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("p",[t._v("You may want to skip the next section if you have already set up a "),a("RouterLink",{attrs:{to:"/emint-tutorials/join-mainnet.html"}},[t._v("full node")]),t._v(".")],1),t._v(" "),a("h2",{attrs:{id:"create-your-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-your-validator"}},[t._v("#")]),t._v(" Create Your Validator")]),t._v(" "),a("p",[t._v("Your "),a("code",[t._v("cosmosvalconspub")]),t._v(" consensus public key fron tendermint can be used to create a new validator by staking tokens. You can find your validator pubkey by running:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXRoZXJtaW50ZCB0ZW5kZXJtaW50IHNob3ctdmFsaWRhdG9yCg=="}}),t._v(" "),a("p",[t._v("To create your validator, just use the following command:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXRoZXJtaW50ZCB0eCBzdGFraW5nIGNyZWF0ZS12YWxpZGF0b3IgXAogIC0tYW1vdW50PTEwMDAwMDBhcGhvdG9uIFwKICAtLXB1YmtleT0kKGV0aGVybWludGQgdGVuZGVybWludCBzaG93LXZhbGlkYXRvcikgXAogIC0tbW9uaWtlcj0mbHQ7ZXRoZXJtaW50X3ZhbGlkYXRvciZndDsgXAogIC0tY2hhaW4taWQ9Jmx0O2NoYWluX2lkJmd0OyBcCiAgLS1jb21taXNzaW9uLXJhdGU9JnF1b3Q7MC4xMCZxdW90OyBcCiAgLS1jb21taXNzaW9uLW1heC1yYXRlPSZxdW90OzAuMjAmcXVvdDsgXAogIC0tY29tbWlzc2lvbi1tYXgtY2hhbmdlLXJhdGU9JnF1b3Q7MC4wMSZxdW90OyBcCiAgLS1taW4tc2VsZi1kZWxlZ2F0aW9uPSZxdW90OzEmcXVvdDsgXAogIC0tZ2FzPSZxdW90O2F1dG8mcXVvdDsgXAogIC0tZ2FzLXByaWNlcz0mcXVvdDswLjAyNXVhdG9tJnF1b3Q7IFwKICAtLWZyb209Jmx0O2tleV9uYW1lJmd0Owo="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("When specifying commission parameters, the "),a("code",[t._v("commission-max-change-rate")]),t._v(" is used to measure % "),a("em",[t._v("point")]),t._v(" change over the "),a("code",[t._v("commission-rate")]),t._v(". E.g. 1% to 2% is a 100% rate increase, but only 1 percentage point.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[a("code",[t._v("Min-self-delegation")]),t._v(" is a strictly positive integer that represents the minimum amount of self-delegated voting power your validator must always have. A "),a("code",[t._v("min-self-delegation")]),t._v(" of 1 means your validator will never have a self-delegation lower than "),a("code",[t._v("1000000aphoton")])])]),t._v(" "),a("p",[t._v("You can confirm that you are in the validator set by using a third party explorer.")]),t._v(" "),a("h2",{attrs:{id:"genesis-transactions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#genesis-transactions"}},[t._v("#")]),t._v(" Genesis Transactions")]),t._v(" "),a("p",[t._v("A genesis transaction (aka "),a("code",[t._v("gentx")]),t._v(") is a JSON file carrying a self-delegation from a validator. All genesis transactions are collected by a genesis coordinator and validated against an initial "),a("code",[t._v("genesis.json")]),t._v(" file.")]),t._v(" "),a("p",[t._v("A "),a("code",[t._v("gentx")]),t._v(" does three things:")]),t._v(" "),a("ol",[a("li",[t._v("Makes the "),a("code",[t._v("validator")]),t._v(" account you created into a validator operator account (i.e. the account that controls the validator).")]),t._v(" "),a("li",[t._v("Self-delegates the provided "),a("code",[t._v("amount")]),t._v(" of staking tokens.")]),t._v(" "),a("li",[t._v("Link the operator account with a Tendermint node pubkey that will be used for signing blocks. If no "),a("code",[t._v("--pubkey")]),t._v(" flag is provided, it defaults to the local node pubkey created via the "),a("code",[t._v("ethermintd init")]),t._v(" command above.")])]),t._v(" "),a("p",[t._v("If you want to participate in genesis as a validator, you need to justify that\nyou have some stake at genesis, create one (or multiple) transactions to bond this stake to your validator address, and include this transaction in the genesis file.")]),t._v(" "),a("p",[t._v("Your "),a("code",[t._v("ethvalconspub")]),t._v(", as shown on the section above, can be used to create a validator transaction on genesis as well.")]),t._v(" "),a("p",[t._v("Next, craft your "),a("code",[t._v("ethermintd gentx")]),t._v(" command:")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("When specifying commission parameters, the "),a("code",[t._v("commission-max-change-rate")]),t._v(" is used to measure % "),a("em",[t._v("point")]),t._v(" change over the "),a("code",[t._v("commission-rate")]),t._v(". E.g. 1% to 2% is a 100% rate increase, but only 1 percentage point.")])]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXRoZXJtaW50ZCBnZW50eCBcCiAgLS1hbW91bnQgJmx0O2Ftb3VudF9vZl9kZWxlZ2F0aW9uX3VhdG9tJmd0OyBcCiAgLS1jb21taXNzaW9uLXJhdGUgJmx0O2NvbW1pc3Npb25fcmF0ZSZndDsgXAogIC0tY29tbWlzc2lvbi1tYXgtcmF0ZSAmbHQ7Y29tbWlzc2lvbl9tYXhfcmF0ZSZndDsgXAogIC0tY29tbWlzc2lvbi1tYXgtY2hhbmdlLXJhdGUgJmx0O2NvbW1pc3Npb25fbWF4X2NoYW5nZV9yYXRlJmd0OyBcCiAgLS1wdWJrZXkgJChldGhlcm1pbnRkIHRlbmRlcm1pbnQgc2hvdy12YWxpZGF0b3IpIFwKICAtLW5hbWUgJEtFWQo="}}),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("For more on "),a("code",[t._v("gentx")]),t._v(", use the help flag: "),a("code",[t._v("ethermintd gentx -h")])])]),t._v(" "),a("h2",{attrs:{id:"confirm-your-validator-is-running"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#confirm-your-validator-is-running"}},[t._v("#")]),t._v(" Confirm Your Validator is Running")]),t._v(" "),a("p",[t._v("Your validator is active if the following command returns anything:")]),t._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"ZXRoZXJtaW50ZCBxdWVyeSB0ZW5kZXJtaW50LXZhbGlkYXRvci1zZXQgfCBncmVwICZxdW90OyQoZXRoZXJtaW50ZCB0ZW5kZXJtaW50IHNob3ctdmFsaWRhdG9yKSZxdW90Owo="}}),t._v(" "),a("p",[t._v("You should now see your validator in one of the block explorers. You are looking for the "),a("code",[t._v("bech32")]),t._v("\nencoded "),a("code",[t._v("address")]),t._v(" in the "),a("code",[t._v("~/.ethermintd/config/priv_validator.json")]),t._v(" file.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("To be in the validator set, you need to have more total voting power than the 100th validator.")])]),t._v(" "),a("h2",{attrs:{id:"halt-your-validator-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#halt-your-validator-node"}},[t._v("#")]),t._v(" Halt Your Validator Node")]),t._v(" "),a("p",[t._v("When attempting to perform routine maintenance or planning for an upcoming coordinated\nupgrade, it can be useful to have your validator systematically and gracefully halt the chain and shutdown the node.")]),t._v(" "),a("p",[t._v("You can achieve this by setting one of the following flags during when using the "),a("code",[t._v("ethermintd start")]),t._v(" command:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--halt-height")]),t._v(": to the block height at which to shutdown the node")]),t._v(" "),a("li",[a("code",[t._v("--halt-time")]),t._v(": to the minimum block time (in Unix seconds) at which to shutdown the node")])]),t._v(" "),a("p",[t._v("The node will stop processing blocks with a zero exit code at that given height/time after\ncommitting the block.")]),t._v(" "),a("h2",{attrs:{hide:"",id:"next"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[t._v("#")]),t._v(" Next")]),t._v(" "),a("p",{attrs:{hide:""}},[t._v("Start and connect a "),a("RouterLink",{attrs:{to:"/quickstart/clients.html"}},[t._v("client")]),t._v(" to a running network")],1)],1)}),[],!1,null,null,null);e.default=i.exports}}]);